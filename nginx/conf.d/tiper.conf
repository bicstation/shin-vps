# tiper.live ã‚µãƒ¼ãƒ“ã‚¹è¨­å®š
server {
    # å¤–éƒ¨ã®ãƒãƒ¼ãƒˆ 8080 (docker-compose.yml ã§å®šç¾©) ã‹ã‚‰ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’å‡¦ç†
    listen 80;
    server_name tiper.live;

    # 1. Django API ã¨ç®¡ç†ç”»é¢ã¸ã®ãƒ—ãƒ­ã‚­ã‚·ï¼ˆ/admin/ ã‹ã‚‰å§‹ã¾ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰
    location /admin/ {
        # ã‚µãƒ¼ãƒ“ã‚¹å: django, ãƒãƒ¼ãƒˆ: 8000
        proxy_pass http://django:8000/admin/; 
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    # 2. Strapi API ã¨ç®¡ç†ç”»é¢ã¸ã®ãƒ—ãƒ­ã‚­ã‚·ï¼ˆ/strapi/ ã‹ã‚‰å§‹ã¾ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰
    # ğŸ”½ ã€å‰Šé™¤ã€‘Strapiã‚’ blog.tiper.live ã«ç§»è¡Œã—ãŸãŸã‚ã€ã“ã®ãƒ–ãƒ­ãƒƒã‚¯ã¯å‰Šé™¤ã—ã¾ã™ã€‚
    # location /strapi/ { ... } ã®ãƒ–ãƒ­ãƒƒã‚¯ã¯ä¸è¦ã§ã™ã€‚

    # 3. ãƒ«ãƒ¼ãƒˆï¼ˆ/ï¼‰ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ next-tiper ã‚µãƒ¼ãƒ“ã‚¹ã¸è»¢é€
    location / {
        # ã‚µãƒ¼ãƒ“ã‚¹å: next-tiper, ãƒãƒ¼ãƒˆ: 3000
        proxy_pass http://next-tiper:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}